{% extends "base_2.html" %}
{% load crispy_forms_tags %}
{% load time_chinese %}
{% block title %}{% endblock %}

<style>
{% block style %}
.reply_comment {
	display: none;
}

#main_video {
/*	text-align:center;*/
	margin-top: 0.8em;
}

.fa-5 {
	font-size: 1.5em;
	/*height: 3em;*/
	 color: #4A4E4A;
	 margin-top: 1px;
}




.btn-primary {
	color: #fff;
	background-color: #5cb85c;
	border-color: #5cb85c;
}

.video-intro{
    background-color: #fff;
    margin-top: 10px;

	border-radius: 4px;
}
.video-intro h3{
	margin-left: 10px;
	margin-top: 6px;
}
.video-intro h5{
	margin-top: 6px;
}
.video_image{
	margin-top: 10px;
	margin-left: 10px;
}

.video-intro hr{
	margin-left: 10px;
	margin-right: 10px;
	border-top: 1px solid #B7AAAA;
	margin-top: 10px;
	margin-bottom: 10px;
}


.jiathis_style_24x24{
	margin-bottom: 10px;
}

.video-browser{
    background-color: #fff;
    margin-top: 0.8em;
	border-radius: 4px;
}


{% endblock %}
</style>







{% block content %}
<div class='row'>
<div class='col-sm-9' id='main_video'>
<video width="100%"  controls="controls">
  <source src={{ obj.url_address|safe  }} >
</video>


<div class='col-sm-12 video-intro'>
<h3>{{ obj.title }}</h3>

<a class='video_image' href='{{ obj.category.get_absolute_url }}'><img src='{{ obj.category.get_image_url }}'  high="80" width="150" class="img-rounded" /></a> <br/>
<!-- <a href='{{ obj.category.get_absolute_url }}'>{{ obj.category.description }}</a> <br/> -->



<hr>
<!-- JiaThis Button BEGIN -->
<div class="col-sm-6 jiathis_style_24x24">
<!-- 	<span class="jiathis_txt"><h5>分享到：</h5></span> -->
	<a class="jiathis_button_qzone"></a>
	<a class="jiathis_button_tsina"></a>
	<a class="jiathis_button_tqq"></a>
	<a class="jiathis_button_weixin"></a>
	<a class="jiathis_button_renren"></a>
	<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank">&nbsp;</a>
</div>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->
<div class='col-sm-6' style='text-align:right;'>

{% if obj.get_previous_url %}
<!-- <a href='{{ obj.get_previous_url }}'><i class="fa fa-step-backward fa-5"></i></a> -->
<a href='{{ obj.get_previous_url }}'><span   data-toggle="tooltip" data-placement="left" title="转到上一课"><i class="fa fa-step-backward fa-5"></i></span></a>
{% endif %}

{% if obj.get_next_url %}	
<!-- <a href='{{ obj.get_next_url }}' ><i class="fa fa-step-forward fa-5"></i></a> -->
<a href='{{ obj.get_next_url }}'><span   data-toggle="tooltip" data-placement="right" title="转到下一课"><i class="fa fa-step-forward fa-5"></i></span></a>
{% endif %}

</div>
</div>
</div>

<div class='col-sm-3 video-browser'>
	<h3>{{ obj.title }}</h3>
	<h3>{{ obj.title }}</h3>
	<h3>{{ obj.title }}</h3>
	<h3>{{ obj.title }}</h3>
	<h3>{{ obj.title }}</h3>
	<h3>{{ obj.title }}</h3>
	<h3>{{ obj.title }}</h3>
	<h3>{{ obj.title }}</h3>
	<h3>{{ obj.title }}</h3>
	<h3>{{ obj.title }}</h3>
	<h3>{{ obj.title }}</h3>
	<h3>{{ obj.title }}</h3>
	<h3>{{ obj.title }}</h3>
	<h3>{{ obj.title }}</h3>
	<h3>{{ obj.title }}</h3>
	<h3>{{ obj.title }}</h3>
</div>
</div>


<!-- {% if obj.tags.all %}
<div class='col-sm-8'>
<ul>
{% for tag in obj.tags.all %}
<li>{{ tag }}</li>
{% endfor %}
<ul>
</div>
{% endif %} -->




<!-- 视频下方的Add Comment表格 -->
<div class='row'>
<div class='col-sm-9'>
<h3>评论/提问</h3>
<form method="POST" action='{{ obj.get_absolute_url }}'>{% csrf_token %}
<input type='hidden' name='video_id' value='{{ obj.id }}'/>
<input type='hidden' name='origin_path' value='{{ request.get_full_path }}'/>

{% crispy comment_form comment_form.helper %}
</form>


<br/>
<br/>
<!-- 显示当前评论 -->
<table class='table'>

{% for comment in comments %}
<!-- 显示当前父评论的评论内容 -->

<tr><td>
<small><font color="#337ab7">{{ comment.user }}</font>:</small>
{{ comment.get_comment }} 
<!-- 发表评论内容的用户名和发表时间 -->
<font color="#337ab7"><small> {{ comment.timestamp|timesince|time_chinese_weeks|time_chinese_week|time_chinese_minus|time_chinese_minu|time_chinese_days|time_chinese_day|time_chinese_hours|time_chinese_hour }} 前 </small></font>
				<!-- 如果评论不是一个子评论 -->
				{% if not comment.is_child %}
				<ul>
				<!-- 显示该评论所有的子评论 -->
				{% for child in comment.get_children %}

				<!--如果评论是回应某个子评论的，那么显示被评论的子评论的用户名-->
				{% if  child.get_reponse  %}
				<font color="#337ab7"><li><small> {{ child.user }} </font>回复  <font color="#337ab7">{{ child.get_reponse }}</font>: </small>
				<!--反之直接显示子评论即可-->
				{% else %}
				<li><small> <font color="#337ab7">{{ child.user }}</font>: </small>
				{% endif %}

				{{ child.get_comment }} 

				<!--回复子评论的reply与表-->
				
				<a href='#' class='reply_btn'>回复</a>
				<div class='reply_comment'>
				<form method="POST" action='{{ obj.get_absolute_url }}'>{% csrf_token %}
				<input type='hidden' name='video_id' value='{{ obj.id }}'/>
				<input type='hidden' name='origin_path' value='{{ comment.get_origin }}'/>
				<input type='hidden' name='parent_id' value='{{ comment.id }}' />
				<input type='hidden' name='reponse_id' value='{{ child.id }}' />

				{% crispy comment_form comment_form.helper %}
				
				</form>
				</div>

				</li>
				{% endfor %}
				</ul>


				<!-- 回复父评论的按钮以及表格-->
				<a href='{{ comment.get_absolute_url }}'>只看此回复</a> | <a href='#' class='reply_btn'>回复</a>
				<div class='reply_comment'>
				<form method="POST" action='{{ obj.get_absolute_url }}'>{% csrf_token %}
				<input type='hidden' name='video_id' value='{{ obj.id }}'/>
				<input type='hidden' name='origin_path' value='{{ comment.get_origin }}'/>
				<input type='hidden' name='parent_id' value='{{ comment.id }}' />
				{% crispy comment_form comment_form.helper %}
				
				</form>
				</div>
				{% endif %}
</td></tr>
{% endfor %}
</table>
</div>
</div>
{% endblock %}

<script>
{% block jquery %}
/*    $(".fa-step-backward").mouseenter(function(){
        $(this).css("background-color", "yellow");
        console.log(count)
    });
    $("p").mouseleave(function(){
        $("p").css("background-color", "lightgray");
    });*/
{% endblock %}
</script>